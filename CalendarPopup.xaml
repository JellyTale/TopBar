<Window x:Class="TopBar.CalendarPopup"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Calendar"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="Manual"
        WindowStyle="None" AllowsTransparency="True"
        Background="Transparent" ResizeMode="NoResize"
        ShowInTaskbar="False" Topmost="True"
        Deactivated="Window_Deactivated"
        MouseEnter="Window_MouseEnter"
        MouseLeave="Window_MouseLeave">

    <Window.Resources>
        <!-- Dark calendar day button -->
        <Style TargetType="CalendarDayButton">
            <Setter Property="Foreground" Value="{DynamicResource PopupFgBright}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="MinWidth" Value="44"/>
            <Setter Property="MinHeight" Value="44"/>
            <Style.Triggers>
                <Trigger Property="IsToday" Value="True">
                    <Setter Property="Background" Value="#5078C8"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#406090"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
                <Trigger Property="IsBlackedOut" Value="True">
                    <Setter Property="Foreground" Value="{DynamicResource PopupSeparator}"/>
                </Trigger>
                <Trigger Property="IsInactive" Value="True">
                    <Setter Property="Foreground" Value="{DynamicResource PopupAccent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Dark calendar button (month/year nav) -->
        <Style TargetType="CalendarButton">
            <Setter Property="Foreground" Value="{DynamicResource PopupFgNormal}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="MinWidth" Value="60"/>
            <Setter Property="MinHeight" Value="44"/>
        </Style>

        <!-- Calendar item (the month grid container) -->
        <Style TargetType="CalendarItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <!-- Calendar root -->
        <Style TargetType="Calendar">
            <Setter Property="Foreground" Value="{DynamicResource PopupFgNormal}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
    </Window.Resources>

    <Border Background="#01000000" BorderBrush="Transparent"
            BorderThickness="0" CornerRadius="8" Padding="18,16">
        <StackPanel>
            <TextBlock x:Name="DateHeader"
                       Foreground="{DynamicResource PopupFgBright}" FontSize="16" FontWeight="SemiBold"
                       Margin="4,0,0,14" />
            <Calendar x:Name="Cal"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Background="Transparent"
                      BorderThickness="0" />
        </StackPanel>
    </Border>
</Window>
